###  赛事直播助手 产品文档


---
#### 程序启动
+ 逻辑：
	+ 禁用`界面选择框`，`队伍选择框`，`Ban单选框`,`Pick单选框`，`确认按钮`，`重置按钮`
	+ 读取比赛图标`match.png`
	+ 读取红队图标`red.png`
	+ 读取蓝队图标`blue.png`
	+ 读取赛程图片`schedule.png`
	+ 读取配置文件`config.ini`，分发时需要打包/释放带格式的默认配置文件
		+ 其中配置文件的内容有：
			+ 两队队名
			+ 两队队员
           
			示例：
			```
			[match]
			stage=Grand Finals
			time=2019-7-7 12:45:13 UTC+8
			[blue]
			name=UNITED KINGDOM
			player1=Bubbleman
			player2=Doomsday
			...
			```
	+ 读取图池表格（任意XLS/XLSX文件，如有多个按字典序排序）
	+ 提示：`等待osu!启动`
	+ 遍历进程列表，等待用户启动osu!
	+ 校验该osu!客户端路径下是否有完整的图池
	+ 对每个Set进行BG剪切，生成三种图片：
		+ 320*50，用于播放歌曲状态下的谱面信息展示
		+ 1240*50，用于游戏中状态下的谱面信息展示
		+ 375*50，用于图池列表中的谱面信息展示
	+ 提示：`初始化完成`
	+ 激活`界面选择框`
	
#### 对阵界面
+ 触发条件：初始化完成之后
+ 逻辑：
	+ 绘制两个旋转的圆圈
	+ 在圆圈中间绘制两队图标以及队伍名
	+ 在界面左/右侧绘制所有队员名称

#### 赛程界面
+ 触发条件：在控制台中选择`赛程界面`
+ 逻辑：全屏绘制schedule.png，后期可以按需做鼠标拖动

#### 图池信息界面
+ 触发条件：在控制台中选择`图池信息界面`
+ 逻辑：
	+ 使用白色背景遮挡原有小型osu!客户端应该在的位置
	+ 在背景上绘制375*50尺寸的谱面信息图片
		+ 获取图池中每种MOD图池的谱面数量
		+ 如果能被3整除，就按每行3个进行绘制
		+ 如果不能被3整除，则剩余图片居中绘制
		+ 新的MOD图池需要另起一行
	+ 点击图片后，判断对应谱面Ban选状态：
		+ 如果该图没有被Ban、也没有被选：
			+ 激活`Ban选项`、`Pick选项`、`队伍选择框`、`确认按钮`
        + 如果该图已经被选/已经被Ban：
			+ 激活`重置按钮`
	+ 点击图片以外的界面区域后：
		+ 禁用`界面选择框`，`队伍选择框`，`Ban单选框`,`Pick单选框`，`确认按钮`，`重置按钮`
	+ 用户在`队伍选择框`选择队伍，选择了`Ban单选框`，并点击`确认`按钮后：
		+ 绘制队伍颜色的圆角矩形边框
		+ 调低图片亮度
	+ 用户点击`重置`按钮后：
		+ 去除圆角矩形边框
		+ 恢复原有亮度
	+ 用户在`队伍选择框`选择队伍，选择了`Pick单选框`，并点击`确认`按钮后：
		+ 在控制台确认用户需要选择的谱面
		+ 修改`Ban图`按钮文字为确认选图
#### 播放歌曲信息界面
+ 触发条件：在控制台中选择`歌曲信息界面`，并且osu!游戏状态在播放中
+ 逻辑：
	+ 在右下角绘制320*50尺寸的谱面信息图片
	+ 根据最后一次选择谱面的队伍，绘制队伍颜色的圆角矩形边框
    + 如果没有最后一次选择谱面的队伍，则视为热手，不绘制边框
#### 游戏歌曲信息界面
+ 触发条件：在控制台中选择`歌曲信息界面`，并且osu!游戏状态在游戏中
+ 逻辑：
	+ 在右下角绘制1240*50尺寸的谱面信息图片
	+ 根据最后一次选择谱面的队伍，绘制队伍颜色的圆角矩形边框
    + 如果没有最后一次选择谱面的队伍，则视为热手，不绘制边框


