###  赛事直播助手 产品/设计文档


---

#### 程序启动

+ 逻辑：
	+ ~~禁用`界面选择框`，`队伍选择框`，`Ban单选框`,`Pick单选框`，`确认按钮`，`重置按钮`~~
	+ ~~读取比赛logo`match.png`（推荐宽度为150，长度为100左右）~~
	+ ~~~~读取红队图标`red.png`（强制长宽为110像素）~~
	+ ~~读取蓝队图标`blue.png`~~
	+ ~~读取赛程图片`schedule.png`（不能大于1280*720）~~
	+ ~~读取配置文件`config.ini`，初次启动时释放带格式的默认配置文件~~
		+ ~~其中配置文件的内容有：~~
			+ ~~两队队名~~
			+ ~~两队队员~~
           
			示例：
			```
		   [Match]
			Stage=Grand Finals
			Time=2019-7-7 12:45:13 UTC+8
			[Blue]
			Name=UNITED KINGDOM
			Player=Bubbleman,Doomsday
	       [Red]
			Name=UNITED STATES
			Player=Bubbleman,Doomsday
			...
			```

	+ ~~读取图池表格（任意XLS/XLSX文件，如有多个按字典序排序，获取最后一个）~~
    
	+ 按照图池中的BID读取用户提供的523*50尺寸谱面背景图片，并制作如下三种格式的图片
		+ 320*50，用于播放歌曲状态下的谱面信息展示
		+ 523*50，用于游戏中状态下的谱面信息展示
		+ 375*50，用于图池列表中的谱面信息展示
	+ ~~提示：`初始化完成`~~
	+ ~~激活`界面选择框`，展示`对阵界面`~~
    
#### 对阵界面
+ 触发条件：初始化完成之后
+ 逻辑：
    + ~~测量比赛Logo的宽度，在（640-(logo宽度/2)，0）绘制比赛Logo~~
	+ ~~在228，187坐标绘制直径为370旋转的圆圈~~
	+ ~~在413-(logo宽度/2)，286处绘制红队图标~~
    + ~~在413-(队伍名长度/2)，379处绘制红队名~~
    + ~~在364，418处绘制“Team Red”~~
	+ ~~在201，256处开始绘制红队队员名称，以此右对齐~~
    + ~~在682，187坐标绘制直径为370旋转的圆圈~~
	+ ~~在867-(logo宽度/2)，286处绘制红队图标~~
    + ~~在867-(队伍名长度/2)，379处绘制红队名~~
    + ~~在822，418处绘制“Team Blue”~~
	+ ~~在1081，256处开始绘制红队队员名称，以此左对齐~~

#### 赛程界面
+ 触发条件：在控制台中选择`赛程界面`
+ 逻辑：全屏绘制schedule.png，后期可以按需做鼠标拖动

#### 图池信息界面
+ 触发条件：在控制台中选择`图池信息界面`
+ 逻辑：
	+ 使用白色背景遮挡原有小型osu!客户端应该在的位置
	+ 在背景上绘制375*50尺寸的谱面信息图片
		+ 获取图池中每种MOD图池的谱面数量
		+ 如果能被3整除，就按每行3个进行绘制
		+ 如果不能被3整除，则剩余图片居中绘制
		+ 新的MOD图池需要另起一行
	+ 点击图片后，判断对应谱面Ban选状态：
		+ 如果该图没有被Ban、也没有被选：
			+ 激活`Ban选项`、`Pick选项`、`队伍选择框`、`确认按钮`
        + 如果该图已经被选/已经被Ban：
			+ 激活`重置按钮`
	+ 点击图片以外的界面区域后：
		+ 禁用`界面选择框`，`队伍选择框`，`Ban单选框`,`Pick单选框`，`确认按钮`，`重置按钮`
	+ 用户在`队伍选择框`选择队伍，选择了`Ban单选框`，并点击`确认`按钮后：
		+ 绘制队伍颜色的圆角矩形边框
		+ 调低图片亮度
	+ 用户点击`重置`按钮后：
		+ 去除圆角矩形边框
		+ 恢复原有亮度
	+ 用户在`队伍选择框`选择队伍，选择了`Pick单选框`，并点击`确认`按钮后：
		+ 在控制台确认用户需要选择的谱面
		+ 修改`Ban图`按钮文字为确认选图
#### 播放歌曲信息界面
+ 触发条件：在控制台中选择`歌曲信息界面`，并且osu!游戏状态在播放中
+ 逻辑：
	+ 在右下角绘制320*50尺寸的谱面信息图片
	+ 根据最后一次选择谱面的队伍，绘制队伍颜色的圆角矩形边框
    + 如果没有最后一次选择谱面的队伍，则视为热手，不绘制边框
#### 游戏歌曲信息界面
+ 触发条件：在控制台中选择`歌曲信息界面`，并且osu!游戏状态在游戏中
+ 逻辑：
	+ 在右下角绘制1240*50尺寸的谱面信息图片
	+ 根据最后一次选择谱面的队伍，绘制队伍颜色的圆角矩形边框
    + 如果没有最后一次选择谱面的队伍，则视为热手，不绘制边框


